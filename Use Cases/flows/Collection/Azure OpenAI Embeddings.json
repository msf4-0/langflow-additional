{"id":"e3ea9e88-19f5-49b4-a8d5-1f2159632cbd","name":"Azure OpenAI Embeddings","data":{"edges":[],"nodes":[{"data":{"type":"CustomComponent","node":{"template":{"api_key":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":true,"name":"api_key","display_name":"API Key","advanced":false,"dynamic":false,"info":"","value":""},"chunk_size":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":1000,"fileTypes":[],"file_path":"","password":false,"name":"chunk_size","display_name":"Chunk Size","advanced":false,"dynamic":false,"info":""},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"from langflow import CustomComponent\nfrom langflow.field_typing import Data\n\nfrom typing import Optional\n\nfrom langchain.embeddings import AzureOpenAIEmbeddings\nfrom langchain.embeddings.base import Embeddings\nfrom langflow import CustomComponent\n\n\nclass AzureOpenAIEmbeddingsComponent(CustomComponent):\n    \"\"\"\n    A custom component for implementing an Embeddings Model using Amazon Bedrock.\n    \"\"\"\n\n    display_name: str = \"Azure OpenAI Embeddings\"\n    description: str = \"Embeddings model from Azure OpenAI.\"\n    documentation = \"https://python.langchain.com/docs/integrations/text_embedding/azureopenai\"\n    beta = True\n\n    def build_config(self):\n        return {\n            \"model_name\": {\n                \"display_name\": \"Model Name\",\n                \"options\": [\"text-embedding-ada-002\"],\n                \"required\": True\n            },\n            \"deployment_name\": {\"display_name\": \"Deployment Name\", \"required\": True},\n            \"endpoint_url\": {\"display_name\": \"Endpoint URL\", \"required\": True},\n            \"api_key\": {\"display_name\": \"API Key\",\"required\": True, \"password\": True},\n            \"code\": {\"show\": False},\n            \"chunk_size\": {\"display_name\": \"Chunk Size\", \"show\": False, \"required\": False, \"field_type\": \"int\", \"value\": 1000},\n            \"embedding_ctx_length\": {\"display_name\": \"Max Context Length\",  \"show\": False, \"required\": False, \"field_type\": \"int\", \"value\": 8191},\n            \"max_retries\": {\"display_name\": \"Max retries\",  \"show\": False, \"required\": False, \"field_type\": \"int\", \"value\": 2}\n        }\n\n    def build(\n        self,\n        model_name: str = \"text-embedding-ada-002\",\n        deployment_name: str = None,\n        endpoint_url: str = None,\n        api_key: str = None,\n        chunk_size: Optional[int] = 1000,\n        embedding_ctx_length: Optional[int] = 8191,\n        max_retries: Optional[int] = 2\n        \n    ) -> Embeddings:\n        try:\n            output = AzureOpenAIEmbeddings(openai_api_type=\"azure\",\n            api_key=api_key,\n            azure_endpoint=endpoint_url,\n            azure_deployment=deployment_name,\n            model=model_name,\n            chunk_size=chunk_size,\n            embedding_ctx_length=embedding_ctx_length,\n            max_retries=max_retries\n            )\n        except Exception as e:\n            raise ValueError(\"Error returned by AzureAPI\") from e\n        return output\n","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":false,"dynamic":true,"info":""},"deployment_name":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"deployment_name","display_name":"Deployment Name","advanced":false,"dynamic":false,"info":"","value":"ara-embedding-ada-dev"},"embedding_ctx_length":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":8191,"fileTypes":[],"file_path":"","password":false,"name":"embedding_ctx_length","display_name":"Max Context Length","advanced":false,"dynamic":false,"info":""},"endpoint_url":{"type":"str","required":true,"placeholder":"","list":false,"show":true,"multiline":false,"fileTypes":[],"file_path":"","password":false,"name":"endpoint_url","display_name":"Endpoint URL","advanced":false,"dynamic":false,"info":"","value":"https://ar-az-d-openaisrv-canadaeast.openai.azure.com/"},"max_retries":{"type":"int","required":false,"placeholder":"","list":false,"show":true,"multiline":false,"value":2,"fileTypes":[],"file_path":"","password":false,"name":"max_retries","display_name":"Max retries","advanced":false,"dynamic":false,"info":""},"model_name":{"type":"str","required":true,"placeholder":"","list":true,"show":true,"multiline":false,"value":"text-embedding-ada-002","fileTypes":[],"file_path":"","password":false,"options":["text-embedding-ada-002"],"name":"model_name","display_name":"Model Name","advanced":false,"dynamic":false,"info":""},"_type":"CustomComponent"},"description":"Embeddings model from Azure OpenAI.","base_classes":["Embeddings"],"display_name":"Azure OpenAI Embeddings","documentation":"https://python.langchain.com/docs/integrations/text_embedding/azureopenai","custom_fields":{"api_key":null,"chunk_size":null,"deployment_name":null,"embedding_ctx_length":null,"endpoint_url":null,"max_retries":null,"model_name":null},"output_types":["Embeddings"],"field_formatters":{},"beta":true,"official":false},"id":"CustomComponent-Mi2Dy"},"id":"CustomComponent-Mi2Dy","position":{"x":0,"y":0},"type":"genericNode"}],"viewport":{"x":1,"y":1,"zoom":1}},"is_component":true}